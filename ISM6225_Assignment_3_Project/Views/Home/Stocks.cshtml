@model IEnumerable<ISM6225_Assignment_3_Project.Models.iex_api_Company>
@{
    ViewData["Title"] = "Stocks Page";
}
<!-- Top Section
-------------------------------------------------------------------------- -->
<div class="row">
    <div class="col-lg-12">
        <h2 class="whitney">Stock Charts</h2>
        <p>
            Select the name of a stock and the currency which you want to see
            prices in.
        </p>
        <p>

        </p>
        <p>

        </p>
    </div>
</div>


<div class="row">
    <form asp-controller="Home" asp-action="Stocks" method="get">
        <!-- Stock Picker
        -------------------------------------------------------------- -->
        <div class="col-md-6">
            <div class="container">
                <h4>Select Stock</h4>
                <div class="dropdown">
                    <select name="getSymbol">
                        @foreach (var stock in Model)
                        {
                            @Html.Raw(stock.userOption)
                        }
                    </select>
                    <input type="submit" value="Select Stock" />
                </div>
            </div>
        </div>
        <!-- Currency Picker
        -------------------------------------------------------------- -->
        <div class="col-md-6">
            <div class="container">
                <h4>Select Currency</h4>
                <div class="dropdown">
                    <select name="getFx">
                        @foreach (var Currency in ViewBag.CurrencyList.FxSymbols)
                        {
                            @Html.Raw(Currency.userOption)
                        }
                    </select>
                </div>
            </div>
        </div>
    </form>
</div>


<!-- Chart Section
-------------------------------------------------------------------------- -->
<div class="row">
    <!-- logo
    -------------------------------------------------------------- -->
    <div class="col-md-12 text-center">
        <img class="img-rounded" src=@ViewBag.logo />
    </div>

    <!-- chart
    -------------------------------------------------------------- -->
    <div class="col-md-7">
        <canvas id="chart_stock" width="420" height="450"></canvas>
    </div>

    <!-- news
    -------------------------------------------------------------- -->
    <div class="col-md-5">
        <h3>Corporate News</h3>
        <p>
            @foreach (var article in ViewBag.news)
            {
                <h4>@Html.Raw(article.headline)</h4>
                <a href="@Html.Raw(article.url)">Link to article</a>
            }
        </p>
    </div>

</div>


<!-- JavaScript for the Stock Chart
-------------------------------------------------------------------------- -->
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function ()
    {
        DrawCharts("@ViewBag.stockChart.Symbol"
                    ,"@ViewBag.stockChart.CompanyName"
                    ,"@ViewBag.stockChart.Dates"
                    ,"@ViewBag.stockChart.PriceClosing"
                    );
    }, false);
</script>
